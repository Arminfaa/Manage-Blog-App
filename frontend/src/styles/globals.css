@import "react-quill-new/dist/quill.snow.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    &,
    &.light-mode {
      --background-app-rgb: 249, 250, 251;
      --color-primary-900: 74, 109, 255;
      --color-primary-800: 92, 124, 255;
      --color-primary-700: 110, 138, 255;
      --color-primary-600: 128, 153, 255;
      --color-primary-500: 146, 167, 255;
      --color-primary-400: 164, 182, 255;
      --color-primary-300: 183, 197, 255;
      --color-primary-200: 201, 211, 255;
      --color-primary-100: 219, 226, 255;
      --color-primary-50: 228, 233, 255;
      --color-secondary-900: 17, 24, 39;
      --color-secondary-800: 31, 41, 55;
      --color-secondary-700: 55, 65, 81;
      --color-secondary-600: 75, 85, 99;
      --color-secondary-500: 107, 114, 128;
      --color-secondary-400: 156, 163, 175;
      --color-secondary-300: 209, 213, 219;
      --color-secondary-200: 229, 231, 235;
      --color-secondary-100: 243, 244, 246;
      --color-secondary-50: 249, 250, 251;
      --color-secondary-0: 255, 255, 255;
      --color-success: 0, 192, 115;
      --color-warning: 255, 153, 0;
      --color-error: 255, 71, 87;
      --color-red-500: 239, 68, 68;
      --color-red-300: 252, 165, 165;
    }
    &.dark-mode {
      --background-app-rgb: 20, 20, 20;
      --color-secondary-900: 249, 250, 251;
      --color-secondary-800: 243, 244, 246;
      --color-secondary-700: 229, 231, 235;
      --color-secondary-600: 209, 213, 219;
      --color-secondary-500: 156, 163, 175;
      --color-secondary-400: 107, 114, 128;
      --color-secondary-300: 75, 85, 99;
      --color-secondary-200: 55, 65, 81;
      --color-secondary-100: 31, 41, 55;
      --color-secondary-50: 17, 24, 39;
      --color-secondary-0: 24, 33, 47;
      --backdrop-color: 0, 0, 0;
    }
  }
}

/* header glass - light: slightly darker, dark: slightly lighter */
.header-glass {
  background-color: rgba(var(--color-secondary-200), 0.65);
}
html.dark-mode .header-glass {
  background-color: rgba(var(--color-secondary-0), 0.85);
}

.rti--container {
  background-color: rgb(var(--color-secondary-100));
  --rti-radius: 0.375rem;
  --rti-s: 0.5rem;
  --rti-tag: #edf2f7;
  --rti-tag-remove: #e53e3e;
  border: none;
}
.rti--container .rti--input {
  background-color: rgb(var(--color-secondary-200));
  color: rgb(var(--color-secondary-800));
  padding: 0.3rem 1rem;
  border-radius: 0.5rem;
}

.rti--tag {
  background-color: rgb(var(--color-secondary-500));
  color: rgb(var(--color-secondary-100));
}

@layer components {
  .form {
    @apply flex flex-col gap-y-8 bg-secondary-0 p-4 rounded-xl w-full max-w-lg;
  }
  .textField__input {
    @apply w-full py-3 px-4 rounded-xl text-secondary-900 border border-secondary-200 bg-secondary-100 hover:border-secondary-300 focus:border-primary-500 focus:bg-secondary-0 focus:outline-none transition-all duration-300 ease-out focus:shadow-lg focus:shadow-primary-200/30 dark:border-secondary-200/50 dark:bg-secondary-200/50 dark:hover:border-secondary-200 dark:focus:border-primary-500 dark:focus:bg-secondary-50 dark:focus:shadow-primary-900/20;
  }
  .btn {
    @apply px-3 py-3 rounded-xl transition-all duration-300 hover:-translate-y-[2.5px];
  }
  .btn--primary {
    @apply bg-primary-900 hover:bg-primary-700 text-secondary-100;
  }
  .btn--secondary {
    @apply bg-secondary-600 text-secondary-100;
  }
  .btn--outline {
    @apply border border-secondary-300 text-secondary-400 hover:bg-secondary-50 hover:border-secondary-900 hover:text-secondary-900 dark:hover:bg-transparent dark:hover:text-white dark:hover:border-white;
  }
  .btn--danger {
    @apply border border-rose-700 text-rose-700;
  }
  .badge {
    @apply inline-block whitespace-nowrap rounded-xl px-2 py-0.5;
  }
  .badge--primary {
    @apply bg-primary-900 text-white;
  }
  .badge--secondary {
    @apply bg-secondary-200 text-secondary-600;
  }
  .badge--success {
    @apply bg-green-500 text-white;
  }
  .badge--danger {
    @apply bg-red-500 text-white;
  }

  .spinner {
    margin: 3.2rem auto 1.6rem;
    width: 60px;
    aspect-ratio: 1;
    border-radius: 50%;
    border: 8px solid rgb(var(--color-primary-900));
    border-right-color: rgb(var(--color-primary-200));
    animation: rotate 1s infinite linear;
  }

  .spinner-mini {
    margin: 0 auto;
    width: 20px;
    aspect-ratio: 1;
    border-radius: 50%;
    border: 2px solid rgb(var(--color-primary-900));
    border-right-color: transparent;
    animation: rotate 1s infinite linear;
  }

  @keyframes rotate {
    to {
      transform: rotate(1turn);
    }
  }
}

* {
  box-sizing: border-box;
  scroll-behavior: smooth;
  /* border: none; */
  outline: none;
  padding: 0;
  margin: 0;
}

html,
body {
  padding: 0;
  margin: 0;
  font-family: var(--vazir-font);
  min-height: 100dvh;
  user-select: none;
  background-color: rgb(var(--background-app-rgb));
  scrollbar-color: rgb(var(--color-secondary-50)) transparent;
  scrollbar-width: thin;
  overscroll-behavior: none;
}

::-webkit-scrollbar {
  width: 8px;
}
::-webkit-scrollbar-track {
  background: rgb(var(--color-secondary-50));
}
::-webkit-scrollbar-thumb {
  background: rgb(var(--color-secondary-50));
  border-radius: 6px;
}
::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--color-secondary-50));
}

button {
  cursor: pointer;
  outline: none;
}
button:disabled {
  cursor: not-allowed;
  background-color: rgb(var(--color-secondary-300), 0.5);
  color: rgb(var(--color-secondary-700), 0.5);
  pointer-events: none;
  box-shadow: none;
}

/* inupt number */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  /* display: none; <- Crashes Chrome on hover */
  -webkit-appearance: none;
  margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
}

input[type='number'] {
  -moz-appearance: textfield; /* Firefox */
}

/* TABLE */

table {
  border-collapse: collapse;
  border-spacing: 0;
  width: 100%;
}

table .title-row {
  background-color: rgb(var(--color-secondary-100));
}

table td,
table th {
  border-bottom: 1px solid rgb(var(--color-secondary-200));
  text-align: right;
  white-space: nowrap;
}

table th {
  padding: 0.6rem 1rem;
  color: rgb(var(--color-secondary-600));
  font-size: 0.9rem;
}
a {
  display: block;
}
table td {
  font-size: 0.85rem;
  padding: 1rem 1rem;
  color: rgb(var(--color-secondary-600));
}

/* comment  indicator */

.post-comments .post-comments__answer {
  position: relative;
}
.post-comments .post-comments__answer::before {
  content: '';
  display: block;
  height: 100%;
  position: absolute;
  right: -15px;
  top: -13px;
  width: 3px;
  background-color: rgb(var(--color-secondary-200));
}

.post-comments .post-comments__answer .answer-item::before {
  content: '';
  display: block;
  height: 3px;
  position: relative;
  right: -31px;
  top: 57px;
  width: 15px;
  background-color: rgb(var(--color-secondary-200));
  z-index: 10;
}

.post-comments .post-comments__answer .last-item:after {
  content: '';
  display: block;
  height: calc(100% - 80px);
  position: absolute;
  right: -15px;
  top: 76px;
  width: 4px;
  background-color: rgb(var(--color-secondary-200));
}

@media (max-width: 640px) {
  .post-comments .post-comments__answer::before {
    display: none;
  }
  .post-comments .post-comments__answer .answer-item::before {
    width: 3px;
    height: 14px;
    right: 11px;
    top: -13px;
    position: absolute;
  }
}

/* Rich text editor - فارسی و RTL */
.rich-editor-wrapper .ql-toolbar.ql-snow {
  direction: ltr;
  text-align: left;
}
.rich-editor-wrapper .ql-toolbar .ql-formats {
  margin-left: 12px;
  margin-right: 0;
  text-align: left;
}
.rich-editor-wrapper .ql-editor.ql-blank::before {
  right: 15px;
  left: auto;
}
.rich-editor-wrapper .ql-snow .ql-picker.ql-header .ql-picker-label::before,
.rich-editor-wrapper .ql-snow .ql-picker.ql-size .ql-picker-label::before,
.rich-editor-wrapper .ql-snow .ql-picker.ql-color .ql-picker-label,
.rich-editor-wrapper .ql-snow .ql-picker.ql-background .ql-picker-label {
  direction: rtl;
  text-align: right;
}
.rich-editor-wrapper .ql-snow .ql-picker.ql-expanded .ql-picker-options {
  left: 0;
  right: auto;
  direction: rtl;
}
.rich-editor-wrapper .ql-editor li {
  list-style-type: none;
  padding-left: 0;
  padding-right: 1.5em;
  position: relative;
}
.rich-editor-wrapper .ql-editor .ql-ui {
  position: absolute;
  right: 0;
}
.rich-editor-wrapper .ql-snow .ql-editor .ql-code-block-container {
  direction: ltr;
  text-align: left;
}
@media (min-width: 1024px) {
  .rich-editor-wrapper .ql-editor {
    min-height: 450px !important;
  }
}
.rich-editor-fullscreen .ql-toolbar.ql-snow {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10;
  background: rgb(var(--color-secondary-100));
  border-bottom: 1px solid rgb(var(--color-secondary-200));
}
.rich-editor-fullscreen .ql-container {
  padding-top: 92px !important;
}
@media (min-width: 360px) {
  .rich-editor-fullscreen .ql-container {
    padding-top: 67px !important;
  }
}
@media (min-width: 640px) {
  .rich-editor-fullscreen .ql-container {
    padding-top: 43px !important;
  }
}

/* Rich text editor content (blog post body) */
.prose-content {
  @apply text-secondary-700 leading-8 max-w-full min-w-0 overflow-x-hidden break-words;
}
.prose-content h1 { @apply text-3xl font-bold mt-6 mb-3 text-secondary-800; }
.prose-content h2 { @apply text-2xl font-bold mt-5 mb-2 text-secondary-800; }
.prose-content h3 { @apply text-xl font-bold mt-4 mb-2 text-secondary-800; }
.prose-content h4 { @apply text-lg font-bold mt-4 mb-2 text-secondary-800; }
.prose-content h5 { @apply text-base font-bold mt-3 mb-1 text-secondary-800; }
.prose-content h6 { @apply text-sm font-bold mt-3 mb-1 text-secondary-800; }
.prose-content p { @apply my-3; }
.prose-content ul { @apply list-disc list-inside my-3 mr-4 space-y-1; }
.prose-content ol { @apply list-decimal list-inside my-3 mr-4 space-y-1; }
.prose-content blockquote { @apply border-r-4 border-primary-400 pr-4 my-3 italic text-secondary-600; }
.prose-content a { @apply text-primary-600 underline hover:text-primary-700; }
.prose-content strong { @apply font-bold; }
.prose-content code { @apply bg-secondary-100 px-1.5 py-0.5 rounded text-sm; }
.prose-content pre { @apply bg-secondary-100 p-4 rounded-lg overflow-x-auto my-3; direction: ltr; text-align: left; }
.prose-content pre code { @apply bg-transparent p-0; direction: ltr; }
/* Quill size: متن عادی (inside p, etc.) */
.prose-content .ql-size-small { font-size: 0.75rem; }
.prose-content .ql-size-normal { font-size: 1rem; }
.prose-content .ql-size-large { font-size: 1.25rem; }
.prose-content .ql-size-huge { font-size: 1.5rem; }

/* Quill size روی هدینگ‌ها: normal = پایه (مثل text-3xl برای h1)، small/large/huge نسبت به آن */
/* کلاس روی فرزند (span) یا روی خود هدینگ */
.prose-content h1 .ql-size-small,
.prose-content h1.ql-size-small { font-size: 1.5rem; }
.prose-content h1 .ql-size-normal,
.prose-content h1.ql-size-normal { font-size: 1.875rem; }
.prose-content h1 .ql-size-large,
.prose-content h1.ql-size-large { font-size: 2.25rem; }
.prose-content h1 .ql-size-huge,
.prose-content h1.ql-size-huge { font-size: 2.8125rem; }
.prose-content h2 .ql-size-small,
.prose-content h2.ql-size-small { font-size: 1.2rem; }
.prose-content h2 .ql-size-normal,
.prose-content h2.ql-size-normal { font-size: 1.5rem; }
.prose-content h2 .ql-size-large,
.prose-content h2.ql-size-large { font-size: 1.875rem; }
.prose-content h2 .ql-size-huge,
.prose-content h2.ql-size-huge { font-size: 2.25rem; }
.prose-content h3 .ql-size-small,
.prose-content h3.ql-size-small { font-size: 1rem; }
.prose-content h3 .ql-size-normal,
.prose-content h3.ql-size-normal { font-size: 1.25rem; }
.prose-content h3 .ql-size-large,
.prose-content h3.ql-size-large { font-size: 1.5625rem; }
.prose-content h3 .ql-size-huge,
.prose-content h3.ql-size-huge { font-size: 1.875rem; }
.prose-content h4 .ql-size-small,
.prose-content h4.ql-size-small { font-size: 0.9rem; }
.prose-content h4 .ql-size-normal,
.prose-content h4.ql-size-normal { font-size: 1.125rem; }
.prose-content h4 .ql-size-large,
.prose-content h4.ql-size-large { font-size: 1.40625rem; }
.prose-content h4 .ql-size-huge,
.prose-content h4.ql-size-huge { font-size: 1.6875rem; }
.prose-content h5 .ql-size-small,
.prose-content h5.ql-size-small { font-size: 0.7rem; }
.prose-content h5 .ql-size-normal,
.prose-content h5.ql-size-normal { font-size: 0.875rem; }
.prose-content h5 .ql-size-large,
.prose-content h5.ql-size-large { font-size: 1.09375rem; }
.prose-content h5 .ql-size-huge,
.prose-content h5.ql-size-huge { font-size: 1.3125rem; }
.prose-content h6 .ql-size-small,
.prose-content h6.ql-size-small { font-size: 0.7rem; }
.prose-content h6 .ql-size-normal,
.prose-content h6.ql-size-normal { font-size: 0.875rem; }
.prose-content h6 .ql-size-large,
.prose-content h6.ql-size-large { font-size: 1.09375rem; }
.prose-content h6 .ql-size-huge,
.prose-content h6.ql-size-huge { font-size: 1.3125rem; }
